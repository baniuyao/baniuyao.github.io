<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Renjie Yao's Blog]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://blog.yaorenjie.com/"/>
  <updated>2015-10-20T10:41:36.000Z</updated>
  <id>http://blog.yaorenjie.com/</id>
  
  <author>
    <name><![CDATA[Renjie Yao]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Convert SOCKS5 Proxy to HTTP Proxy on Mac]]></title>
    <link href="http://blog.yaorenjie.com/2015/10/20/Covert-SOCKS5-Proxy-to-HTTP-Proxy-on-Mac/"/>
    <id>http://blog.yaorenjie.com/2015/10/20/Covert-SOCKS5-Proxy-to-HTTP-Proxy-on-Mac/</id>
    <published>2015-10-20T09:30:12.000Z</published>
    <updated>2015-10-20T10:41:36.000Z</updated>
    <content type="html"><![CDATA[<p>We usually use ShadowsocksX on Mac to build a SOCKS5 tunnel. But as a developer, I need HTTP Proxy in many places such as npm or some IDE tools. I need a tool to build a HTTP Proxy and pack data stream to SOCKS5 tunnel.</p>
<p>I found a solution of using a tool called <code>polipo</code>. We can simply install this tool by <code>homebrew</code>.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew instasll polipo</span><br></pre></td></tr></table></figure>
<p>After installed <code>polipo</code>, let’s make it work by a simple command.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">polipo socksParentProxy=localhost:1080</span><br></pre></td></tr></table></figure>
<p><code>localhost:1080</code> is your local SOCKS5 address. In default, HTTP proxy created by <code>polipo</code> is running on <code>localhost:8123</code>.</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>We usually use ShadowsocksX on Mac to build a SOCKS5 tunnel. But as a developer, I need HTTP Proxy in many places such as npm or some IDE]]>
    </summary>
    
      <category term="Linux" scheme="http://blog.yaorenjie.com/tags/Linux/"/>
    
      <category term="Mac" scheme="http://blog.yaorenjie.com/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Advanced Python Data Structure]]></title>
    <link href="http://blog.yaorenjie.com/2015/08/27/Advanced-Python-Data-Structure/"/>
    <id>http://blog.yaorenjie.com/2015/08/27/Advanced-Python-Data-Structure/</id>
    <published>2015-08-27T07:13:37.000Z</published>
    <updated>2015-09-07T09:12:04.000Z</updated>
    <content type="html"><![CDATA[<h1 id="Colletions">Colletions</h1><p><code>Collections</code> is a very useful data structure colletion in Python. In this post, I will introduct</p>
<h2 id="collections-Couter()">collections.Couter()</h2><p><code>Counter</code> is used to count something of iterable data structure such as list and tuple. Let’s see example below:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">name_list = [<span class="string">'frank'</span>, <span class="string">'frank'</span>, <span class="string">'tony'</span>, <span class="string">'jack'</span>, <span class="string">'judy'</span>, <span class="string">'jack'</span>, <span class="string">'jack'</span>]</span><br><span class="line">name_counter = Counter(name_list) </span><br><span class="line"><span class="keyword">print</span> counter <span class="comment"># print couter of name_list</span></span><br><span class="line"><span class="comment"># Counter(&#123;'jack': 3, 'frank': 2, 'tony': 1, 'judy': 1&#125;)</span></span><br><span class="line"><span class="keyword">print</span> counter.most_common(<span class="number">1</span>) <span class="comment"># print top 1 count</span></span><br><span class="line"><span class="comment"># [('jack', 3)]</span></span><br><span class="line"><span class="keyword">print</span> counter.most_common(<span class="number">2</span>) <span class="comment"># print top 2 count</span></span><br><span class="line"><span class="comment"># [('jack', 3), ('frank', 2)]</span></span><br></pre></td></tr></table></figure></p>
<p>Now I am going to update a Counter:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">name_list_one = [<span class="string">'frank'</span>, <span class="string">'frank'</span>, <span class="string">'tony'</span>]</span><br><span class="line">name_counter = Counter(name_list_one)</span><br><span class="line"><span class="comment"># name_counter: Counter(&#123;'frank': 2, 'tony': 1&#125;)</span></span><br><span class="line">name_list_two = [<span class="string">'tony'</span>, <span class="string">'jack'</span>]</span><br><span class="line">name_counter.update(name_list_two)</span><br><span class="line"><span class="comment"># name_counter: Counter(&#123;'tony': 2, 'frank': 2, 'jack': 1&#125;)</span></span><br><span class="line">name_counter.subtract([<span class="string">'frank'</span>]) <span class="comment"># subtract is the reverse operation of update</span></span><br><span class="line"><span class="comment"># name_counter: Counter(&#123;'tony': 2, 'frank': 1, 'jack': 1&#125;)</span></span><br><span class="line">name_counter.subtract([<span class="string">'jack'</span>, <span class="string">'jack'</span>]) <span class="comment"># value can be zero and negative counts</span></span><br><span class="line"><span class="comment"># name_counter: Counter(&#123;'tony': 2, 'frank': 1, 'jack': -1&#125;)</span></span><br></pre></td></tr></table></figure></p>
<h2 id="collections-defaultdict()">collections.defaultdict()</h2><p><code>defaultdict</code> is almost the same as <code>dict</code> which can be assigned by this statement:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;<span class="string">'name'</span>: <span class="string">'frank'</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>defaultdict</code> provides a function which will be invoked when we use a non-exists key to access the value in the <code>defaultdict</code>. When we want to get the value by a key which does not exist in the dict, <code>dict</code> will raise a <code>KeyError</code> Exception. We can use <code>d.get(KEY, DEFAULT_VALUE)</code> to define the value we will get if the key does not exist. It is okay but not an easy work-around. For example, I have a dict named <code>writer_book_dict</code> and its key is writers’ name and value is books’ name. When I get the value by a non-exist writer, it should return ‘NO BOOKS’. Let’s see how we can deal it with <code>dict</code> and <code>defaultdict</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">writer_book_dict = &#123;<span class="string">'frank'</span>: <span class="string">'book_1'</span>, <span class="string">'tony'</span>: <span class="string">'book_2'</span>&#125;</span><br><span class="line">book_by_jack = writer_book_dict.get(<span class="string">'jack'</span>, <span class="string">'NO BOOKS'</span>)</span><br><span class="line">book_by_jack = writer_book_dict.get(<span class="string">'judy'</span>, <span class="string">'NO BOOKS'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">writer_book_defaultdict = default(lamda: <span class="string">'NO BOOKS'</span>)</span><br><span class="line">writer_book_defaultdict.get(<span class="string">'jack'</span>) <span class="comment"># return 'NO BOOKS'</span></span><br></pre></td></tr></table></figure>
<p>We can use a complex function in initialize the defaultdict. Furthermore, we can also define the data structure of the value in the <code>defaultdict</code>. Let’s see an example, we need to make a classification of a short paragraph by the first letter of each world. It is to say, ‘I am a student and I like sports’ -&gt; <code>{&#39;a&#39;: [&#39;am&#39;, &#39;a&#39;, &#39;and&#39;], &#39;i&#39;: [&#39;it&#39;, &#39;is&#39;, &#39;i&#39;], &#39;l&#39;: [&#39;like&#39;], &#39;s&#39;: [&#39;student&#39;, &#39;sports&#39;]}</code>. If we use <code>default</code> we must judge if the key exists and if it does not exist, we need to initialize with an empty list like below:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">paragraph = <span class="string">'I am a student and I like sports'</span></span><br><span class="line">word_dict = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> paragraph:</span><br><span class="line">    first_letter = word[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> word_dict:</span><br><span class="line">        word_dict[first_letter] = [word]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        word_dict[first_letter].append(word)</span><br></pre></td></tr></table></figure></p>
<p>Let’s see how <code>defaultdict</code> works:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">paragraph = <span class="string">'I am a student and I like sports'</span></span><br><span class="line">word_defaultdict = defaultdict(list)</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> paragraph:</span><br><span class="line">    word_defaultdict[word[<span class="number">0</span>]].append(word)</span><br></pre></td></tr></table></figure></p>
<p>If we want to <code>uniq</code> the element of <code>word_defaultdict</code>, we can simply initialize <code>word_defaultdict</code> by <code>defaultdict(set)</code>.</p>
<h2 id="bisect">bisect</h2><p><code>bisect</code> is used to insert element into an sorted list and keep the list sorted. <code>bisect</code> module have six methods:</p>
<ol>
<li>bisect</li>
<li>bisect_left</li>
<li>bisect_right</li>
<li>insort</li>
<li>insort_left</li>
<li>insort_right</li>
</ol>
<p>Methods start with <code>bisect</code> will return the index of the element you need to insert. Those start with <code>insort</code> will make change into list directly and return nothing. The difference between <code>left</code> and <code>right</code> will affect the result of operation only when the element you want to insert does exist in the list and <code>left</code> will return the index left of this existed-element and <code>right</code> return the right position. Please remark that <code>bisect</code> is the same as <code>bisect_right</code> and <code>insort</code> is the same as <code>insort_right</code>. Let’s see some examples.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sorted_list = [<span class="number">1</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">1000</span>]</span><br><span class="line">bisect(sorted_list, <span class="number">20</span>) <span class="comment"># return 2</span></span><br><span class="line">bisect(sorted_list, <span class="number">10</span>) <span class="comment"># return 2</span></span><br><span class="line">bisect_left(sorted_list, <span class="number">10</span>) <span class="comment"># return 1</span></span><br><span class="line">bisect_right(sorted_list, <span class="number">10</span>) <span class="comment"># return 1</span></span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="Colletions">Colletions</h1><p><code>Collections</code> is a very useful data structure colletion in Python. In this post, I will int]]>
    </summary>
    
      <category term="python" scheme="http://blog.yaorenjie.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Enable CORS in bottle.py]]></title>
    <link href="http://blog.yaorenjie.com/2015/06/03/Enable-CORS-in-bottle-py/"/>
    <id>http://blog.yaorenjie.com/2015/06/03/Enable-CORS-in-bottle-py/</id>
    <published>2015-06-03T02:22:27.000Z</published>
    <updated>2015-09-07T09:10:36.000Z</updated>
    <content type="html"><![CDATA[<h1 id="Solution">Solution</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bottle <span class="keyword">import</span> Bottle, request, response, run</span><br><span class="line">app = Bottle()</span><br><span class="line"> </span><br><span class="line"><span class="decorator">@app.hook('after_request')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">enable_cors</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""</span><br><span class="line">    You need to add some headers to each request.</span><br><span class="line">    Don't use the wildcard '*' for Access-Control-Allow-Origin in production.</span><br><span class="line">    """</span></span><br><span class="line">    response.headers[<span class="string">'Access-Control-Allow-Origin'</span>] = <span class="string">'*'</span></span><br><span class="line">    response.headers[<span class="string">'Access-Control-Allow-Methods'</span>] = <span class="string">'PUT, GET, POST, DELETE, OPTIONS'</span></span><br><span class="line">    response.headers[<span class="string">'Access-Control-Allow-Headers'</span>] = <span class="string">'Origin, Accept, Content-Type, X-Requested-With, X-CSRF-Token'</span></span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="Solution">Solution</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span clas]]>
    </summary>
    
      <category term="bottle" scheme="http://blog.yaorenjie.com/tags/bottle/"/>
    
      <category term="python" scheme="http://blog.yaorenjie.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Kafka Compression Performance Tests]]></title>
    <link href="http://blog.yaorenjie.com/2015/03/27/Kafka-Compression-Performance-Tests/"/>
    <id>http://blog.yaorenjie.com/2015/03/27/Kafka-Compression-Performance-Tests/</id>
    <published>2015-03-27T06:01:05.000Z</published>
    <updated>2015-10-30T07:04:07.000Z</updated>
    <content type="html"><![CDATA[<h1 id="Kafka_Compression_Performance_Tests">Kafka Compression Performance Tests</h1><h2 id="Backgroud">Backgroud</h2><p><code>Kafka</code> use <code>End-to-End</code> compression model which means that <code>Producer</code> and <code>Consumer</code> are doing the compression and de-compression jobs. This feature enables the reduction of on-the-fly network costs and the <code>Broker</code> will increase its cpu load.</p>
<h2 id="Environment">Environment</h2><h3 id="Hardware_Box">Hardware Box</h3><table>
<thead>
<tr>
<th style="text-align:right">CPU</th>
<th style="text-align:right">Memory</th>
<th style="text-align:right">Disk</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2.5 GHz Intel Core i7</td>
<td style="text-align:right">16GB</td>
<td style="text-align:right">512GB SSD</td>
</tr>
</tbody>
</table>
<h3 id="Software_Box">Software Box</h3><table>
<thead>
<tr>
<th style="text-align:right">Kafka</th>
<th style="text-align:right">JDK</th>
<th style="text-align:right">Scala</th>
<th style="text-align:right">Broker</th>
<th style="text-align:right">Producer</th>
<th style="text-align:right">JVM</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0.8.2.1</td>
<td style="text-align:right">1.7.0u75</td>
<td style="text-align:right">2.11</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">-Xms4G -Xmx4G -Xmn2G</td>
</tr>
</tbody>
</table>
<h3 id="Kafka_Configuration">Kafka Configuration</h3><table>
<thead>
<tr>
<th style="text-align:right">Replica</th>
<th style="text-align:right">Partition</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<h3 id="Messages_Content">Messages Content</h3><p>The content I used to send to <code>Kafka</code> is a nginx log which contains 607,781 lines and 200MB. Each line is like below:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> - - [<span class="number">24</span>/Mar/<span class="number">2015</span>:<span class="number">15</span>:<span class="number">57</span>:<span class="number">09</span> +<span class="number">0800</span>] <span class="string">"GET /login?gotype=2 HTTP/1.1"</span> <span class="string">"0.002"</span> <span class="number">200</span> <span class="number">3177</span> <span class="string">"http://abc.com/URLhtml"</span> <span class="string">"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET4.0C; .NET4.0E)"</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> foo.com foo-hostname</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$wc</span> -l passport<span class="class">.access</span><span class="class">.log</span></span><br><span class="line">  <span class="number">607781</span> passport<span class="class">.access</span><span class="class">.log</span></span><br><span class="line">~/Downloads</span><br><span class="line"><span class="variable">$du</span> -sh passport<span class="class">.access</span><span class="class">.log</span></span><br><span class="line"><span class="number">200</span>M	passport<span class="class">.access</span><span class="class">.log</span></span><br></pre></td></tr></table></figure>
<h2 id="Baseline_Test">Baseline Test</h2><h3 id="Kafka_Producer_Configuration">Kafka Producer Configuration</h3><table>
<thead>
<tr>
<th style="text-align:right">compression.type</th>
<th style="text-align:right">buffered.memory</th>
<th style="text-align:right">acks</th>
<th style="text-align:right">linger.ms</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">None</td>
<td style="text-align:right">32MB</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
</tr>
</tbody>
</table>
<h3 id="Test_Result">Test Result</h3><p>The first test is going to figure out the fact that the value we defined in <code>batch.size</code> is not the exactly batch size <code>Producer</code> will use. I got the real batch size of <code>Producer</code> by using its metrics API. Tests have been done with <code>batch.size</code> of 200, 500, 1000, 1200, 1500, 2000. Chart below is the result: </p>
<p><img src="/images/batch_size.png" alt="Alt text"></p>
<p>We can see clearly that <code>batch.size</code> is a smaller than <code>batch-size-avg</code>(it is the excatly batch size <code>Producer</code> used). And while the <code>batch.size</code> is 200 and 500, the <code>batch-size-avg</code> is almost the same - aroud 370. That is to say, <code>batch-size-avg</code> is not only settled by the parameter <code>batch.size</code>, furthermore, it is also related to other factor.</p>
<p>All tests have been done in different <code>batch.size</code> of 500, 1000, 1200, 1500 and 2000. Why I didn’t use <code>batch.size</code> of 200 because the phenomenon in the above paragraph.</p>
<p>Let’s take a look on the <code>Producer</code> baseline：</p>
<p><img src="/images/producer_baseline.png" alt="Alt text"></p>
<p>The throughput rised along with the increasing of <code>batch.size</code>. And the latency rised as well. Let me make a simple math calculation. I use the <code>batch.size</code> of 500 for the base number and get the percentage of throughput and latency increasement.</p>
<table>
<thead>
<tr>
<th style="text-align:right">-</th>
<th style="text-align:right">500</th>
<th style="text-align:right">1000</th>
<th style="text-align:right">1200</th>
<th style="text-align:right">1500</th>
<th style="text-align:right">2000</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">throughtput</td>
<td style="text-align:right">100%</td>
<td style="text-align:right">183.25%</td>
<td style="text-align:right">230.74%</td>
<td style="text-align:right">289.59%</td>
<td style="text-align:right">387.81%</td>
</tr>
<tr>
<td style="text-align:right">latency</td>
<td style="text-align:right">100%</td>
<td style="text-align:right">117.47%</td>
<td style="text-align:right">121.40%</td>
<td style="text-align:right">123.76%</td>
<td style="text-align:right">128.31%</td>
</tr>
</tbody>
</table>
<p><img src="/images/producer_baseline_ratio.png" alt="Alt text"></p>
<h3 id="Conclusion">Conclusion</h3><p>The throughtput of <code>Producer</code> can get much higher with the increasing of <code>batch.size</code>. And at the meantime, latency will increas in a very tiny level.</p>
<h2 id="Producer_Performance_with_Compression">Producer Performance with Compression</h2><p><code>Kafka</code> support three different compression type：</p>
<ul>
<li>gzip</li>
<li>snappy</li>
<li>lz4</li>
</ul>
<p>Because of the box I use to test, when I use <code>lz4</code> in testing, I got OOM exception. I think the casuse of this exception is the Java code will get all lines of the <code>passport.access.log</code> and send to <code>Kafka</code> in a very short time. So I used <code>batch.size</code> of 2000, 2500, 3000, 3500, 4000, 4500 and 5000. Using big <code>batch.size</code> will increass the latency and this will give JVM some time to do the GC jobs.</p>
<p>Below is the result</p>
<h3 id="Compression_Rate">Compression Rate</h3><p>The value is better when it is smaller</p>
<table>
<thead>
<tr>
<th style="text-align:right">-</th>
<th style="text-align:right">none</th>
<th style="text-align:right">gzip</th>
<th style="text-align:right">snappy</th>
<th style="text-align:right">lz4</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">Average Compression Rate</td>
<td style="text-align:right">100%</td>
<td style="text-align:right">19.21%</td>
<td style="text-align:right">78.19%</td>
<td style="text-align:right">31.37%</td>
</tr>
</tbody>
</table>
<p><img src="/images/compression_rate.png" alt="Alt text"></p>
<h3 id="Throughput">Throughput</h3><p>When I enabled the compression, the througput decreased. Let’s see the result.</p>
<table>
<thead>
<tr>
<th style="text-align:right">-</th>
<th style="text-align:right">none</th>
<th style="text-align:right">gzip</th>
<th style="text-align:right">snappy</th>
<th style="text-align:right">lz4</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">Average Throughtput</td>
<td style="text-align:right">151901.1038</td>
<td style="text-align:right">39346.00017</td>
<td style="text-align:right">119707.5266</td>
<td style="text-align:right">191469.8994</td>
</tr>
</tbody>
</table>
<p><img src="/images/compression_throughput.png" alt="Alt text"></p>
<h3 id="Latency">Latency</h3><p>Result:</p>
<table>
<thead>
<tr>
<th style="text-align:right">-</th>
<th style="text-align:right">none</th>
<th style="text-align:right">gzip</th>
<th style="text-align:right">snappy</th>
<th style="text-align:right">lz4</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">Average Latency ms</td>
<td style="text-align:right">0.25</td>
<td style="text-align:right">4.97</td>
<td style="text-align:right">0.41</td>
<td style="text-align:right">0.66</td>
</tr>
<tr>
<td style="text-align:right">Ratio</td>
<td style="text-align:right">100.00%</td>
<td style="text-align:right">1937.61%</td>
<td style="text-align:right">159.99%</td>
<td style="text-align:right">258.62%</td>
</tr>
</tbody>
</table>
<p><img src="/images/compression_latency.png" alt="Alt text"></p>
<h1 id="Consumer_Performance_with_Compression">Consumer Performance with Compression</h1><p>Because <code>Kafka</code> 0.8.2.1 has not enabled the new <code>Consumer</code>, so I cannot get the detailed metrics like I have got in <code>Producer</code>. So in this test, I use the total time <code>Consumer</code> used to consumes a fixed number of messages to do the benchmark.</p>
<p>The messages are <code>test.access.log</code> in twice size. Below is the result</p>
<table>
<thead>
<tr>
<th style="text-align:right">-</th>
<th style="text-align:left">none</th>
<th style="text-align:right">gzip</th>
<th style="text-align:center">snappy</th>
<th style="text-align:right">lz4</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">Time Cost ms</td>
<td style="text-align:left">3218</td>
<td style="text-align:right">5374</td>
<td style="text-align:center">5216</td>
<td style="text-align:right">4507</td>
</tr>
<tr>
<td style="text-align:right">Time Cost Increase Rate</td>
<td style="text-align:left">100%</td>
<td style="text-align:right">167%</td>
<td style="text-align:center">162.09%</td>
<td style="text-align:right">140.06%</td>
</tr>
</tbody>
</table>
<p><img src="/images/cosumer_time_cost.png" alt="Alt text"></p>
<p>We can see <code>lz4</code> is the fastest.</p>
<h1 id="Conclusion-1">Conclusion</h1><p><code>lz4</code> is the best choice in compression rate and both performance of <code>Producer</code> and <code>Consumer</code>. Below is the comparison of <code>lz4</code> performance and base line performance. For simplified the chart, this only shows the result with <code>batch.size</code> of 5000.</p>
<p><img src="/images/overview.png" alt="Alt text"></p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="Kafka_Compression_Performance_Tests">Kafka Compression Performance Tests</h1><h2 id="Backgroud">Backgroud</h2><p><code>Kafka</code> ]]>
    </summary>
    
      <category term="kafka" scheme="http://blog.yaorenjie.com/tags/kafka/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[The Analysis of Zabbix history and trends Storing]]></title>
    <link href="http://blog.yaorenjie.com/2015/03/04/The-Analysis-of-Zabbix-history-and-trends-Storing/"/>
    <id>http://blog.yaorenjie.com/2015/03/04/The-Analysis-of-Zabbix-history-and-trends-Storing/</id>
    <published>2015-03-04T01:41:25.000Z</published>
    <updated>2015-10-20T09:22:11.000Z</updated>
    <content type="html"><![CDATA[<h1 id="Intro">Intro</h1><p><code>history</code> and <code>trends</code> are two main tables in Zabbix database for storing data. There are also tables inherits <code>history</code> which are used to store different types of data. For example, table <code>history_uint</code> is to store uint data. Others are <code>history_str</code>, <code>history_log</code> and <code>history_text</code>. Please pay attention that there is only one table inherits table <code>trends</code> and its name is <code>table_uint</code>.</p>
<h1 id="Entrance">Entrance</h1><p>The start of the whole process is in function <code>DCsync_all()</code>, <code>src/libs/zbxdbcache/dbcache.c</code>. <code>dbcache</code> is a feature which enables Zabbix to keep data in memory first and flush to database in batch.</p>
<p>To make it more clearly, I wrote comments inline.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span>	<span class="title">DCsync_all</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	zabbix_log(LOG_LEVEL_DEBUG, <span class="string">"In DCsync_all()"</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// call `DCsync_history` to sync history data from cache to database</span></span><br><span class="line">	DCsync_history(ZBX_SYNC_FULL);</span><br><span class="line">	<span class="comment">// assert code is running in Zabbix Server. Zabbix Server WILL NOT run codes below</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="number">0</span> != (daemon_type &amp; ZBX_DAEMON_TYPE_SERVER))</span><br><span class="line">		<span class="comment">// sync trends data. </span></span><br><span class="line">		DCsync_trends();</span><br><span class="line">	zabbix_log(LOG_LEVEL_DEBUG, <span class="string">"End of DCsync_all()"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="DCsync_history()">DCsync_history()</h1><p>Since we are talking about Zabbix Server, so we will only take a look at <code>DCsync_history()</code>. In this paragraph, I have simplified the code in <code>DCsync_history()</code> to help readers understand the core process of flushing data to database.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">DBbegin();</span><br><span class="line">	</span><br><span class="line"><span class="comment">// while in Zabbix Server mode</span></span><br><span class="line"><span class="keyword">if</span> (<span class="number">0</span> != (daemon_type &amp; ZBX_DAEMON_TYPE_SERVER))</span><br><span class="line">&#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="comment">// add data to history</span></span><br><span class="line">	DCmass_add_history(history, history_num);</span><br><span class="line">	<span class="comment">// update trends</span></span><br><span class="line">	DCmass_update_trends(history, history_num);</span><br><span class="line">	...		</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">	DCmass_proxy_add_history(history, history_num);</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line">DBcommit();</span><br></pre></td></tr></table></figure>
<h1 id="DCmass_add_history()">DCmass_add_history()</h1><p>Let’s take a look into <code>DCmass_add_history()</code>.</p>
<p>It will calculate the numbers for each type of items.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (history[i].value_type)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> ITEM_VALUE_TYPE_FLOAT:</span><br><span class="line">			h_num++;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> ITEM_VALUE_TYPE_UINT64:</span><br><span class="line">			huint_num++;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> ITEM_VALUE_TYPE_STR:</span><br><span class="line">			hstr_num++;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> ITEM_VALUE_TYPE_TEXT:</span><br><span class="line">			htext_num++;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> ITEM_VALUE_TYPE_LOG:</span><br><span class="line">			hlog_num++;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And then, call function to write data to database.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* history */</span></span><br><span class="line"><span class="keyword">if</span> (<span class="number">0</span> != h_num)</span><br><span class="line">	dc_add_history_dbl(history, history_num);</span><br><span class="line"><span class="comment">/* history_uint */</span></span><br><span class="line"><span class="keyword">if</span> (<span class="number">0</span> != huint_num)</span><br><span class="line">	dc_add_history_uint(history, history_num);</span><br></pre></td></tr></table></figure>
<p>Finally, we can touch the sql in <code>dc_add_history_dbl()</code>.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span>	<span class="title">dc_add_history_dbl</span><span class="params">(ZBX_DC_HISTORY *history, <span class="keyword">int</span> history_num)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; history_num; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		...</span><br><span class="line">		zbx_db_insert_add_values(&amp;db_insert, history[i].itemid, history[i].ts.sec, history[i].ts.ns,</span><br><span class="line">				history[i].value.dbl);</span><br><span class="line">	&#125;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="DCmass_update_trends">DCmass_update_trends</h1><p>Let’s see the code first.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span>	<span class="title">DCmass_update_trends</span><span class="params">(ZBX_DC_HISTORY *history, <span class="keyword">int</span> history_num)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; history_num; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		...</span><br><span class="line">		DCadd_trend(&amp;history[i], &amp;trends, &amp;trends_alloc, &amp;trends_num);</span><br><span class="line">	&#125;</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">0</span> &lt; trends_num)</span><br><span class="line">		<span class="comment">// flush trends while we actually HAVE trends data to flush</span></span><br><span class="line">		DCflush_trends(trends, &amp;trends_num, <span class="number">1</span>);</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>We get that the main process is in the function <code>DCadd_trend()</code>. Let’s move on to it.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span>	<span class="title">DCadd_trend</span><span class="params">(ZBX_DC_HISTORY *history, ZBX_DC_TREND **trends, <span class="keyword">int</span> *trends_alloc, <span class="keyword">int</span> *trends_num)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="comment">// get trend data from database by itemid</span></span><br><span class="line">	trend = DCget_trend(history-&gt;itemid);</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">switch</span> (trend-&gt;value_type)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> ITEM_VALUE_TYPE_FLOAT:</span><br><span class="line">			...</span><br><span class="line">			<span class="comment">// calculate the new data</span></span><br><span class="line">			trend-&gt;value_avg.dbl = (trend-&gt;num * trend-&gt;value_avg.dbl</span><br><span class="line">				+ history-&gt;value.dbl) / (trend-&gt;num + <span class="number">1</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Above all, I think we are clear on the fact how Zabbix update history and trends.</p>
<p>Below is the process:<br><img src="/images/zabbix_history_trends.jpg" alt="Alt text"></p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="Intro">Intro</h1><p><code>history</code> and <code>trends</code> are two main tables in Zabbix database for storing data. There are ]]>
    </summary>
    
      <category term="C" scheme="http://blog.yaorenjie.com/tags/C/"/>
    
      <category term="Zabbix" scheme="http://blog.yaorenjie.com/tags/Zabbix/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Zabbix install issues with aclocal 1.14 is missing]]></title>
    <link href="http://blog.yaorenjie.com/2015/02/27/Zabbix-install-issue-with-aclocal-1-14-is-missing/"/>
    <id>http://blog.yaorenjie.com/2015/02/27/Zabbix-install-issue-with-aclocal-1-14-is-missing/</id>
    <published>2015-02-26T23:14:35.000Z</published>
    <updated>2015-09-07T09:10:24.000Z</updated>
    <content type="html"><![CDATA[<h1 id="Backgroud">Backgroud</h1><p><code>configure</code> is okay, the next step is <code>make install</code>. But <code>make install</code> exist with error which said it cannot find <code>aclocal-1.14</code> like below:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[baniuyao@YaoRenjies-CentOS zabbix-2.4.4]$ sudo make install&#10;CDPATH=&#34;$&#123;ZSH_VERSION+.&#125;:&#34; &#38;&#38; cd . &#38;&#38; /bin/sh /home/baniuyao/apps/zabbix-2.4.4/missing aclocal-1.14 -I m4&#10;/home/baniuyao/apps/zabbix-2.4.4/missing: line 81: aclocal-1.14: command not found&#10;WARNING: &#39;aclocal-1.14&#39; is missing on your system.&#10;         You should only need it if you modified &#39;acinclude.m4&#39; or&#10;         &#39;configure.ac&#39; or m4 files included by &#39;configure.ac&#39;.&#10;         The &#39;aclocal&#39; program is part of the GNU Automake package:&#10;         &#60;http://www.gnu.org/software/automake&#62;&#10;         It also requires GNU Autoconf, GNU m4 and Perl in order to run:&#10;         &#60;http://www.gnu.org/software/autoconf&#62;&#10;         &#60;http://www.gnu.org/software/m4/&#62;&#10;         &#60;http://www.perl.org/&#62;&#10;make: *** [aclocal.m4] Error 127</span><br></pre></td></tr></table></figure>
<p>But the system has <code>aclocal-1.14</code> already:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[baniuyao@YaoRenjies-CentOS ~]$ which aclocal-1.14&#10;/usr/local/bin/aclocal-1.14</span><br></pre></td></tr></table></figure>
<h1 id="Solution">Solution</h1><p>This is because we don’t have some <code>autoconf</code>(<em>.ac) and <code>automake</code>(</em>.am) files. We can <code>touch</code> these.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch configure.ac aclocal.m4 configure Makefile.am Makefile.in</span><br></pre></td></tr></table></figure>
<p>Or we can use <code>autoreconf</code> to generate.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo autoreconf -ivf</span><br></pre></td></tr></table></figure>
<p>Let’s figure out what <code>-ivf</code> means.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-v, --verbose            verbosely report processing&#10;-f, --force              consider all files obsolete&#10;-i, --install            copy missing auxiliary files</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="Backgroud">Backgroud</h1><p><code>configure</code> is okay, the next step is <code>make install</code>. But <code>make install</code]]>
    </summary>
    
      <category term="C" scheme="http://blog.yaorenjie.com/tags/C/"/>
    
      <category term="Zabbix" scheme="http://blog.yaorenjie.com/tags/Zabbix/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Install Thrift with glibc on CentOS]]></title>
    <link href="http://blog.yaorenjie.com/2015/01/13/Install-Thrift-with-glibc-on-CentOS/"/>
    <id>http://blog.yaorenjie.com/2015/01/13/Install-Thrift-with-glibc-on-CentOS/</id>
    <published>2015-01-13T08:08:12.000Z</published>
    <updated>2015-09-07T09:09:23.000Z</updated>
    <content type="html"><![CDATA[<h1 id="Install_glib">Install glib</h1><h2 id="Install_Development_Tools">Install Development Tools</h2><p><code>Development Tools</code> is a group of pacakges in yum such as <code>automake</code>, <code>autoconf</code> and so on.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y update&#10;sudo yum -y groupinstall &#34;Development Tools&#34;&#10;sudo yum install -y wget</span><br></pre></td></tr></table></figure>
<h2 id="Upgrade_some_tools">Upgrade some tools</h2><p>Although some tools are included in the <code>Development Tools</code>, <code>glibc</code> and <code>thrift</code> need new version of those tools. We need to upgrade them.</p>
<h3 id="autoconf">autoconf</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://ftp.gnu.org/gnu/autoconf/autoconf-2.69.tar.gz&#10;tar xvf autoconf-2.69.tar.gz&#10;cd autoconf-2.69&#10;./configure&#10;make&#10;sudo make install</span><br></pre></td></tr></table></figure>
<h3 id="automake">automake</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://ftp.gnu.org/gnu/automake/automake-1.14.tar.gz&#10;tar xvf automake-1.14.tar.gz&#10;cd automake-1.14&#10;./configure&#10;make&#10;sudo make install</span><br></pre></td></tr></table></figure>
<h3 id="bison">bison</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://ftp.gnu.org/gnu/bison/bison-2.5.1.tar.gz&#10;tar xvf bison-2.5.1.tar.gz&#10;cd bison-2.5.1&#10;./configure&#10;make&#10;sudo make install</span><br></pre></td></tr></table></figure>
<h2 id="Install_glib_(finally)">Install glib (finally)</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://ftp.gnome.org/pub/gnome/sources/glib/2.42/glib-2.42.0.tar.xz&#10;tar xvf glib-2.42.0.tar.xz&#10;cd glib-2.42.0&#10;./configure&#10;make&#10;sudo make install</span><br></pre></td></tr></table></figure>
<h2 id="Check">Check</h2><p><code>pkgconfig</code> is in <code>/usr/local/lib/pkgconfig</code> or <code>/usr/lib64/pkgconfig</code>. Please find it by yourself by <code>locate pkgconfig</code>. Further, you must add <code>PKG_CONFIG_PATH</code> in your environment variables.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -lrt /usr/local/lib/pkgconfig&#10;echo &#34;export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig&#34; &#62;&#62; /etc/profile&#10;source /etc/profile</span><br></pre></td></tr></table></figure>
<h1 id="Install_Thrift_(finally_*_2)">Install Thrift (finally * 2)</h1><p>If you get <code>thrift</code> from <code>git</code>, you must run <code>bootstrap.sh</code> first.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd thrift-0.9.2&#10;./configure --with-lua=no&#10;result:&#10;Building C++ Library ......... : no&#10;Building C (GLib) Library .... : yes&#10;Building Java Library ........ : no&#10;Building C# Library .......... : no&#10;Building Python Library ...... : yes&#10;Building Ruby Library ........ : no&#10;Building Haskell Library ..... : no&#10;Building Perl Library ........ : no&#10;Building PHP Library ......... : no&#10;Building Erlang Library ...... : no&#10;Building Go Library .......... : no&#10;Building D Library ........... : no&#10;Building NodeJS Library ...... : no&#10;Building Lua Library ......... : yes&#10;make &#10;make install</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<h1 id="Install_glib">Install glib</h1><h2 id="Install_Development_Tools">Install Development Tools</h2><p><code>Development Tools</code> is]]>
    </summary>
    
      <category term="c" scheme="http://blog.yaorenjie.com/tags/c/"/>
    
      <category term="linux" scheme="http://blog.yaorenjie.com/tags/linux/"/>
    
      <category term="thrift" scheme="http://blog.yaorenjie.com/tags/thrift/"/>
    
  </entry>
  
</feed>
